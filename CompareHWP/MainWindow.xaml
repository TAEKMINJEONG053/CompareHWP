<Window x:Class="CompareHWP.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
        xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
        xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
        xmlns:local="clr-namespace:CompareHWP"
        xmlns:view="clr-namespace:CompareHWP.View"
        xmlns:converters="clr-namespace:CompareHWP.Helper"
        mc:Ignorable="d"
        Title="MainWindow"
        Height="600"
        Width="850"
        Loaded="Window_Loaded"
        PreviewKeyDown="Window_PreviewKeyDown">
    <Window.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibility" />

        <!-- 로딩 스피너 애니메이션 -->
        <Storyboard x:Key="SpinAnimation"
                    RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                             From="0"
                             To="360"
                             Duration="0:0:1" />
        </Storyboard>

        <DropShadowEffect x:Key="CardShadow"
                          BlurRadius="25"
                          ShadowDepth="0"
                          Opacity="0.4" />
    </Window.Resources>
    <Grid>
        <dx:DXTabControl>
            <dx:DXTabItem Header="주소지 검토">
                <view:CheckDistance />
            </dx:DXTabItem>
            <dx:DXTabItem Header="보고서 유사성 검토">
                <view:CheckReportSimilarity />
            </dx:DXTabItem>
            <dx:DXTabItem Header="수행 일시 중복 검토">
            </dx:DXTabItem>
        </dx:DXTabControl>
        <!-- 🔥 로딩 오버레이 -->
        <Grid Visibility="{Binding IsBusy, Converter={StaticResource BoolToVisibility}}"
              Background="#80000000">

            <!-- 중앙 카드 -->
            <Border Width="260"
                    Height="180"
                    Background="#121A2B"
                    CornerRadius="20"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Effect="{StaticResource CardShadow}">

                <StackPanel VerticalAlignment="Center"
                            HorizontalAlignment="Center">

                    <!-- 스피너 -->
                    <Grid Width="48"
                          Height="48">
                        <Ellipse Width="48"
                                 Height="48"
                                 Stroke="#26314A"
                                 StrokeThickness="6" />
                        <Ellipse Width="48"
                                 Height="48"
                                 Stroke="#4F7DFF"
                                 StrokeThickness="6"
                                 StrokeDashArray="2 6"
                                 RenderTransformOrigin="0.5,0.5">
                            <Ellipse.RenderTransform>
                                <RotateTransform />
                            </Ellipse.RenderTransform>
                            <Ellipse.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard Storyboard="{StaticResource SpinAnimation}" />
                                </EventTrigger>
                            </Ellipse.Triggers>
                        </Ellipse>
                    </Grid>

                    <!-- 텍스트 -->
                    <TextBlock Text="로딩 중..."
                               Foreground="#EAF0FF"
                               FontSize="15"
                               FontWeight="SemiBold"
                               Margin="0,20,0,4"
                               HorizontalAlignment="Center" />

                    <TextBlock Text="잠시만 기다려 주세요"
                               Foreground="#A9B4D0"
                               FontSize="12"
                               HorizontalAlignment="Center" />
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
